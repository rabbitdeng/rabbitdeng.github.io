---
layout: default
---

<article class="post">
  <header class="post-header">
    <h1 class="post-title">{{ page.title }}</h1>
    <p class="post-meta">
      {{ page.date | date: "%B %d, %Y" }}
      {% if page.author %}
        â€¢ {{ page.author }}
      {% endif %}
      {% if page.tags.size > 0 %}
        â€¢ Tags: 
        {% for tag in page.tags %}
          <a href="{{ site.baseurl }}/tags/#{{ tag | slugify }}">{{ tag }}</a>{% if forloop.last == false %}, {% endif %}
        {% endfor %}
      {% endif %}
    </p>
  </header>

  <div class="post-content">
    {{ content }}
  </div>

  <div class="post-navigation">
    {% if page.previous.url %}
      <a href="{{ page.previous.url }}" class="prev-post">
        <span class="nav-label">ä¸Šä¸€ç¯‡</span>
        <h3 class="nav-title">{{ page.previous.title }}</h3>
      </a>
    {% endif %}
    {% if page.next.url %}
      <a href="{{ page.next.url }}" class="next-post">
        <span class="nav-label">ä¸‹ä¸€ç¯‡</span>
        <h3 class="nav-title">{{ page.next.title }}</h3>
      </a>
    {% endif %}
  </div>
  
  <div class="post-stats">
    <!-- è®¿é—®é‡ç»Ÿè®¡ -->
    <div class="post-views">
      <span class="stats-label">é˜…è¯»é‡ï¼š</span>
      <span id="busuanzi_value_page_pv"></span>
    </div>
    
    <!-- ç‚¹èµåŠŸèƒ½ -->
    <div class="post-like">
      <button id="like-btn" class="like-button" onclick="toggleLike()">
        <span id="like-icon">â¤ï¸</span>
        <span id="like-count">0</span>
      </button>
    </div>
    
    <!-- æ”¶è—åŠŸèƒ½ -->
    <div class="post-bookmark">
      <button id="bookmark-btn" class="bookmark-button" onclick="bookmarkPage()">
        <span id="bookmark-icon">â­</span>
        <span id="bookmark-text">æ”¶è—</span>
      </button>
    </div>
  </div>
  
  <script>
    // åˆå§‹åŒ–ç‚¹èµåŠŸèƒ½
    document.addEventListener('DOMContentLoaded', function() {
      const postId = '{{ page.url }}';
      const likeCountKey = 'like_count_' + postId;
      const hasLikedKey = 'has_liked_' + postId;
      
      // æ¢å¤ç‚¹èµæ•°
      const likeCount = localStorage.getItem(likeCountKey) || '0';
      document.getElementById('like-count').textContent = likeCount;
      
      // æ¢å¤ç‚¹èµçŠ¶æ€
      const hasLiked = localStorage.getItem(hasLikedKey) === 'true';
      if (hasLiked) {
        document.getElementById('like-icon').textContent = 'ğŸ’–';
      }
    });
    
    function toggleLike() {
      const postId = '{{ page.url }}';
      const likeCountKey = 'like_count_' + postId;
      const hasLikedKey = 'has_liked_' + postId;
      
      let likeCount = parseInt(localStorage.getItem(likeCountKey) || '0');
      let hasLiked = localStorage.getItem(hasLikedKey) === 'true';
      
      if (hasLiked) {
        // å–æ¶ˆç‚¹èµ
        likeCount--;
        hasLiked = false;
        document.getElementById('like-icon').textContent = 'â¤ï¸';
      } else {
        // ç‚¹èµ
        likeCount++;
        hasLiked = true;
        document.getElementById('like-icon').textContent = 'ğŸ’–';
      }
      
      // ä¿å­˜åˆ°localStorage
      localStorage.setItem(likeCountKey, likeCount.toString());
      localStorage.setItem(hasLikedKey, hasLiked.toString());
      
      // æ›´æ–°æ˜¾ç¤º
      document.getElementById('like-count').textContent = likeCount;
    }
    
    function bookmarkPage() {
      const bookmarkBtn = document.getElementById('bookmark-btn');
      const bookmarkIcon = document.getElementById('bookmark-icon');
      const bookmarkText = document.getElementById('bookmark-text');
      
      try {
        // å°è¯•ä½¿ç”¨ç°ä»£æµè§ˆå™¨API
        if (navigator.clipboard) {
          // æ£€æŸ¥æ˜¯å¦æ”¯æŒä¹¦ç­¾API
          if (window.sidebar && window.sidebar.addPanel) {
            // Firefox
            window.sidebar.addPanel(document.title, window.location.href, '');
          } else if (window.external && ('AddFavorite' in window.external)) {
            // IE
            window.external.AddFavorite(window.location.href, document.title);
          } else if (navigator.userAgent.includes('Chrome') || navigator.userAgent.includes('Safari')) {
            // Chrome/Safari
            alert('è¯·æŒ‰ Ctrl+D (Windows) æˆ– Cmd+D (Mac) æ·»åŠ åˆ°æ”¶è—å¤¹');
          }
          
          // æ›´æ–°æŒ‰é’®çŠ¶æ€
          bookmarkIcon.textContent = 'ğŸŒŸ';
          bookmarkText.textContent = 'å·²æ”¶è—';
          bookmarkBtn.disabled = true;
          
          // æ·»åŠ ä¸´æ—¶æç¤º
          const tempMsg = document.createElement('div');
          tempMsg.textContent = 'æ–‡ç« å·²æ·»åŠ åˆ°æ”¶è—å¤¹ï¼';
          tempMsg.style.cssText = 'position: fixed; top: 20px; right: 20px; background: #4CAF50; color: white; padding: 10px 20px; border-radius: 5px; z-index: 1000;';
          document.body.appendChild(tempMsg);
          setTimeout(() => {
            tempMsg.remove();
          }, 3000);
        }
      } catch (error) {
        console.error('æ”¶è—å¤±è´¥:', error);
        alert('æ”¶è—åŠŸèƒ½æš‚ä¸å¯ç”¨ï¼Œè¯·æ‰‹åŠ¨æ·»åŠ åˆ°æ”¶è—å¤¹');
      }
    }
  </script>
</article>